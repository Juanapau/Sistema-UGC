<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta - Sistema UGC</title>
<link rel="icon" type="image/png" href="./logo.png">
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: #f3f4f6;
min-height: 100vh;
}

.header {
background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
color: white;
padding: 20px 30px;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
display: flex;
justify-content: space-between;
align-items: center;
}

.header-left {
display: flex;
align-items: center;
gap: 15px;
}

.header-left img {
width: 50px;
height: 50px;
border-radius: 50%;
border: 2px solid #dc2626;
}

.header-title h1 {
font-size: 1.5em;
margin-bottom: 3px;
}

.header-title p {
color: #9ca3af;
font-size: 0.85em;
}

.user-info {
background: rgba(255,255,255,0.1);
padding: 10px 20px;
border-radius: 10px;
display: flex;
align-items: center;
gap: 15px;
}

.user-avatar {
width: 40px;
height: 40px;
background: #dc2626;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.3em;
}

.user-details h3 {
font-size: 0.95em;
margin-bottom: 2px;
}

.user-details p {
font-size: 0.75em;
color: #fbbf24;
}

.btn-logout {
background: #dc2626;
color: white;
border: none;
padding: 8px 20px;
border-radius: 8px;
cursor: pointer;
font-size: 0.9em;
font-weight: 600;
transition: all 0.3s;
}

.btn-logout:hover {
background: #991b1b;
transform: translateY(-2px);
}

.container {
max-width: 1400px;
margin: 30px auto;
padding: 0 20px;
}

.alert-consulta {
background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
border: 2px solid #fbbf24;
border-radius: 15px;
padding: 20px 25px;
margin-bottom: 30px;
display: flex;
align-items: center;
gap: 15px;
box-shadow: 0 4px 6px rgba(251, 191, 36, 0.2);
}

.alert-consulta .icon {
font-size: 2.5em;
}

.alert-consulta .content h3 {
color: #92400e;
font-size: 1.1em;
margin-bottom: 5px;
}

.alert-consulta .content p {
color: #78350f;
font-size: 0.9em;
line-height: 1.5;
}

.modules-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 25px;
margin-top: 30px;
}

.module-card {
background: white;
border-radius: 15px;
padding: 25px;
box-shadow: 0 4px 6px rgba(0,0,0,0.05);
transition: all 0.3s;
border: 2px solid transparent;
cursor: pointer;
}

.module-card:hover {
transform: translateY(-5px);
box-shadow: 0 10px 20px rgba(0,0,0,0.1);
border-color: #2a5298;
}

.module-header {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 15px;
}

.module-icon {
width: 60px;
height: 60px;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
border-radius: 12px;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.8em;
}

.module-info h3 {
color: #1f2937;
font-size: 1.1em;
margin-bottom: 5px;
}

.module-info p {
color: #6b7280;
font-size: 0.85em;
}

.module-stats {
display: flex;
gap: 20px;
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid #e5e7eb;
}

.stat-item {
flex: 1;
}

.stat-item .number {
font-size: 1.5em;
font-weight: bold;
color: #dc2626;
display: block;
}

.stat-item .label {
font-size: 0.75em;
color: #6b7280;
text-transform: uppercase;
}

.btn-view {
width: 100%;
padding: 12px;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
color: white;
border: none;
border-radius: 10px;
font-size: 0.95em;
font-weight: 600;
cursor: pointer;
margin-top: 15px;
transition: all 0.3s;
}

.btn-view:hover {
transform: translateY(-2px);
box-shadow: 0 6px 12px rgba(42, 82, 152, 0.3);
}

@media (max-width: 768px) {
.header {
flex-direction: column;
gap: 15px;
text-align: center;
}

.modules-grid {
grid-template-columns: 1fr;
}
}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
<div class="header-left">
<img src="./logo.png" alt="Logo" onerror="this.style.display='none'">
<div class="header-title">
<h1>ğŸ“Š Sistema de Consulta</h1>
<p>Solo Lectura - CENSA</p>
</div>
</div>

<div class="user-info">
<div class="user-avatar">ğŸ‘¤</div>
<div class="user-details">
<h3 id="userName">Usuario de Consulta</h3>
<p>ğŸ” Acceso de solo lectura</p>
</div>
<button class="btn-logout" onclick="cerrarSesion()">
ğŸšª Salir
</button>
</div>
</div>

<!-- CONTAINER -->
<div class="container">
<!-- ALERTA DE CONSULTA -->
<div class="alert-consulta">
<div class="icon">ğŸ”’</div>
<div class="content">
<h3>Modo Solo Consulta Activado</h3>
<p>Tienes acceso de <strong>solo lectura</strong> a todos los mÃ³dulos. No podrÃ¡s crear, editar ni eliminar registros. Para solicitar permisos de administrador, contacta a la Unidad de GestiÃ³n de Convivencia.</p>
</div>
</div>

<!-- MÃ“DULOS -->
<div class="modules-grid">
<!-- INCIDENCIAS -->
<div class="module-card" onclick="verModulo('incidencias')">
<div class="module-header">
<div class="module-icon">ğŸ“‹</div>
<div class="module-info">
<h3>Incidencias</h3>
<p>Registro de conductas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statIncidencias">---</span>
<span class="label">Registros</span>
</div>
<div class="stat-item">
<span class="number" id="statIncidenciasMes">---</span>
<span class="label">Este mes</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- CONTACTOS -->
<div class="module-card" onclick="verModulo('contactos')">
<div class="module-header">
<div class="module-icon">ğŸ“±</div>
<div class="module-info">
<h3>Contactos</h3>
<p>Padres y tutores</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statContactos">---</span>
<span class="label">Contactos</span>
</div>
<div class="stat-item">
<span class="number" id="statContactosCompletos">---</span>
<span class="label">Completos</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- TARDANZAS -->
<div class="module-card" onclick="verModulo('tardanzas')">
<div class="module-header">
<div class="module-icon">â°</div>
<div class="module-info">
<h3>Tardanzas</h3>
<p>Control de llegadas tarde</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statTardanzas">---</span>
<span class="label">Total</span>
</div>
<div class="stat-item">
<span class="number" id="statTardanzasHoy">---</span>
<span class="label">Hoy</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- ESTUDIANTES -->
<div class="module-card" onclick="verModulo('estudiantes')">
<div class="module-header">
<div class="module-icon">ğŸ‘¨â€ğŸ“</div>
<div class="module-info">
<h3>Estudiantes</h3>
<p>Base de datos</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statEstudiantes">---</span>
<span class="label">Estudiantes</span>
</div>
<div class="stat-item">
<span class="number" id="statCursos">---</span>
<span class="label">Cursos</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- ESTADÃSTICAS -->
<div class="module-card" onclick="verModulo('estadisticas')">
<div class="module-header">
<div class="module-icon">ğŸ“Š</div>
<div class="module-info">
<h3>EstadÃ­sticas</h3>
<p>Reportes y grÃ¡ficas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ“ˆ</span>
<span class="label">AnÃ¡lisis</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“‰</span>
<span class="label">Tendencias</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Reportes</button>
</div>

<!-- HISTORIAL -->
<div class="module-card" onclick="verModulo('historial')">
<div class="module-header">
<div class="module-icon">ğŸ“œ</div>
<div class="module-info">
<h3>Historial</h3>
<p>Actividad del sistema</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ•</span>
<span class="label">Reciente</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“…</span>
<span class="label">Archivo</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Historial</button>
</div>
</div>
</div>

<script>
// ==========================================
// VERIFICAR AUTENTICACIÃ“N
// ==========================================

window.addEventListener('load', function() {
const usuarioData = localStorage.getItem('usuarioUGC');

if (!usuarioData) {
// No hay sesiÃ³n activa, redirigir a login
window.location.href = 'login.html';
return;
}

const usuario = JSON.parse(usuarioData);

// Verificar que sea usuario de consulta
if (usuario.rol !== 'consulta') {
console.log('âš ï¸ Este usuario no tiene rol de consulta');
// Redirigir segÃºn su rol
if (usuario.rol === 'administrador') {
window.location.href = 'index.html';
}
return;
}

// Mostrar nombre del usuario
document.getElementById('userName').textContent = usuario.nombre;

console.log('âœ… Usuario autenticado:', usuario);

// Cargar estadÃ­sticas (simuladas por ahora)
cargarEstadisticas();
});

// ==========================================
// CARGAR ESTADÃSTICAS
// ==========================================

function cargarEstadisticas() {
// Simular carga de datos
// En producciÃ³n, estos datos vendrÃ­an de Google Sheets

document.getElementById('statIncidencias').textContent = '124';
document.getElementById('statIncidenciasMes').textContent = '18';

document.getElementById('statContactos').textContent = '387';
document.getElementById('statContactosCompletos').textContent = '312';

document.getElementById('statTardanzas').textContent = '56';
document.getElementById('statTardanzasHoy').textContent = '3';

document.getElementById('statEstudiantes').textContent = '401';
document.getElementById('statCursos').textContent = '18';

console.log('ğŸ“Š EstadÃ­sticas cargadas');
}

// ==========================================
// VER MÃ“DULO
// ==========================================

function verModulo(modulo) {
console.log('ğŸ‘ï¸ Abriendo mÃ³dulo:', modulo);

// Por ahora mostrar alerta
alert(`ğŸ“Š MÃ³dulo de ${modulo}\n\nğŸ”’ Vista de solo lectura activada.\n\nEn este mÃ³dulo podrÃ¡s VER todos los registros pero NO podrÃ¡s crear, editar ni eliminar.`);

// En producciÃ³n, redirigir a la pÃ¡gina correspondiente:
// window.location.href = `${modulo}-consulta.html`;
}

// ==========================================
// CERRAR SESIÃ“N
// ==========================================

function cerrarSesion() {
const confirmar = confirm('Â¿EstÃ¡s seguro de que deseas cerrar sesiÃ³n?');

if (confirmar) {
localStorage.removeItem('usuarioUGC');
console.log('ğŸ‘‹ SesiÃ³n cerrada');
window.location.href = 'login.html';
}
}

console.log('ğŸ“Š Sistema de consulta cargado');
</script>

</body>
</html>
