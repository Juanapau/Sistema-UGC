<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Incidencias - Maestros</title>
<style>
/* ===== CSS ORIGINAL SIN CAMBIOS ===== */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
min-height: 100vh;
padding: 20px;
display: flex;
align-items: center;
justify-content: center;
}

.container {
background: white;
border-radius: 20px;
box-shadow: 0 20px 60px rgba(0,0,0,0.3);
max-width: 800px;
width: 100%;
overflow: hidden;
}

.header {
background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
color: white;
padding: 30px;
text-align: center;
}

.header h1 {
font-size: 2em;
margin-bottom: 10px;
}

.header p {
color: #4a9eff;
font-size: 1.1em;
}

.content {
padding: 40px;
}

.alert {
padding: 15px 20px;
border-radius: 10px;
margin-bottom: 25px;
display: none;
animation: slideIn 0.3s;
}

@keyframes slideIn {
from { opacity: 0; transform: translateY(-10px); }
to { opacity: 1; transform: translateY(0); }
}

.alert-success {
background: #d1fae5;
color: #065f46;
border-left: 4px solid #10b981;
}

.alert-error {
background: #fee2e2;
color: #991b1b;
border-left: 4px solid #ef4444;
}

.form-group { margin-bottom: 25px; }

label {
display: block;
margin-bottom: 8px;
color: #1f2937;
font-weight: 600;
font-size: 0.95em;
}

input, select, textarea {
width: 100%;
padding: 12px 15px;
border: 2px solid #e5e7eb;
border-radius: 10px;
font-size: 1em;
transition: all 0.3s;
font-family: inherit;
}

textarea { min-height: 120px; resize: vertical; }

.autocomplete-container { position: relative; }

.suggestions {
position: absolute;
top: 100%;
left: 0;
right: 0;
background: white;
border: 2px solid #e5e7eb;
border-top: none;
border-radius: 0 0 10px 10px;
max-height: 250px;
overflow-y: auto;
display: none;
z-index: 1000;
}

.suggestion-item {
padding: 12px 15px;
cursor: pointer;
border-bottom: 1px solid #f3f4f6;
}

.suggestion-item:hover { background: #f3f4f6; }

.btn {
width: 100%;
padding: 15px;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
color: white;
border: none;
border-radius: 10px;
font-size: 1.1em;
font-weight: 600;
cursor: pointer;
}

.loading {
display: inline-block;
width: 20px;
height: 20px;
border: 3px solid rgba(255,255,255,.3);
border-radius: 50%;
border-top-color: white;
animation: spin 1s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

.info-box {
background: #eff6ff;
border-left: 4px solid #3b82f6;
padding: 15px;
border-radius: 8px;
margin-bottom: 25px;
font-size: 0.9em;
color: #1e40af;
}
</style>
</head>

<body>
<div class="container">
<div class="header">
<h1>üìã Registro de Incidencias</h1>
<p>Sistema de Gesti√≥n de Convivencia - CENSA</p>
</div>

<div class="content">
<div class="info-box">
üí° <strong>Instrucciones:</strong> Complete todos los campos obligatorios (*) y haga clic en "Registrar Incidencia".
</div>

<div class="alert alert-success" id="alertSuccess">
‚úÖ <strong>¬°Incidencia registrada exitosamente!</strong>
</div>

<div class="alert alert-error" id="alertError">
‚ùå <strong>Error:</strong> <span id="errorMessage"></span>
</div>

<form id="formIncidencia">
<!-- FORMULARIO ORIGINAL SIN CAMBIOS -->
</form>
</div>
</div>

<script>
/* ==============================
   URLs ORIGINALES (LAS 3)
   ============================== */
const URL_INCIDENCIAS = 'https://script.google.com/macros/s/AKfycbx7_pvGcRFlfDu6yoUHa0EN9oNz9d9XIolBksCI2opqhVBwkNNMoYHyt3-4iOTI26uT/exec';
const URL_ESTUDIANTES = 'https://script.google.com/macros/s/AKfycbyk1gUcU_cFSDbMz34WpEn1s81ctUIExmxzG062TZAx0KQhj5eOyQQVN2Rk8rLdMkicEA/exec';
const URL_APPS_SCRIPT = 'https://script.google.com/macros/s/AKfycbx2Hdz1rYL8GBn9PVG64sFOHC0wBfivmKFNwM4lmSWKzN6C7iKhTHRdxKMbwiowMnNx/exec';

/* Guardar configuraci√≥n */
localStorage.setItem('urlIncidencias', URL_INCIDENCIAS);
localStorage.setItem('urlEstudiantes', URL_ESTUDIANTES);
localStorage.setItem('urlAppsScript', URL_APPS_SCRIPT);

let estudiantes = [];

/* ==============================
   CARGA DE ESTUDIANTES
   ============================== */
async function cargarEstudiantes() {
const res = await fetch(URL_ESTUDIANTES);
estudiantes = await res.json();
}

/* ==============================
   INICIALIZACI√ìN
   ============================== */
window.addEventListener('DOMContentLoaded', () => {
document.getElementById('alertSuccess').style.display = 'none';
document.getElementById('alertError').style.display = 'none';

const now = new Date();
now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
document.getElementById('fechaIncidencia').value = now.toISOString().slice(0,16);

cargarEstudiantes();
console.log('‚úÖ Sistema listo y funcionando');
});
</script>
</body>
</html>
